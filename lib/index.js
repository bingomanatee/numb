!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(i=i||self).SCHEMA=t()}(this,(function(){"use strict";const i=Symbol("absent"),t={n:i=>!Number.isNaN(i)&&("number"==typeof i||"bigint"==typeof i),f:i=>"function"==typeof i,s:i=>"string"==typeof i,nil:i=>null===i},s="valid,invalid,positive,negative,whole,zero,lt,lte,gt,gte".split(","),e="isValid,isInvalid,isPositive,isNegative,isWhole,isZero,isInfinite,isInfiniteNeg,isEven,isOdd".split(","),n="isGT,isLT,isGTE,isLTE,isEq,isMultOf,isNotMultOf".split(","),r="undefined"!=typeof Proxy?new Proxy({},{get:(i,t)=>s.includes(t)||"else"===t?()=>r:i[t]}):{};function h(h,l,u=i){return new Proxy(h,{get:(a,o)=>"else"===o?s=>{if(e.includes(l)){if(h[l])return r;t.f(s)&&s(h.source)}return n.includes(l)&&u!==i?h[l](u)?r:(t.f(s)&&s(h.source),h):h}:h[l]?s.includes(o)?Reflect.getPrototypeOf(h)[o].bind(h):h[o]:r[o]})}class l{constructor(s,e=i){if(this.source=s,this.alt=e,t.f(s))try{this.value=s()}catch(s){e!==i&&(t.f(e)?this.value=e(s):this.value=e)}else this.value=s,t.f(e)&&this.fix(e);this._lock=!0}catch(i){this._catch=i}do(i,t){this._f(i,t);try{return i(this.value)}catch(i){if(this._catch)return this._catch(i,t);throw i}}doV(i,t){this._f(i,t);try{return i(this.source)}catch(i){if(this._catch)return this._catch(i,t);throw i}}fix(i){return this.isValid||(t.f(i)?this._value=this.doV(i):this._value=i),this}get type(){return typeof this.value}get originalType(){return typeof this.source}then(i){return this.isValid?this.do(i):r}else(i){return this.isValid?r:(this.do(()=>i(this.source)),this)}set value(i){if(this._lock)throw new Error("cannot update value of numb");t.n(i)||t.nil(i)?this._value=i:t.s(i)?this._value=Number.parseFloat(i):this._value=Number.NaN}get value(){return this._value}get isValid(){return t.n(this.value)}get isInvalid(){return!t.n(this.value)}get isInfinite(){return this.isValid?this.value===Number.POSITIVE_INFINITY:null}get isInfiniteNeg(){return this.isValid?this.value===Number.NEGATIVE_INFINITY:null}get isWhole(){return this.isValid?this.value===Math.round(this.value):null}get isFloat(){return this.isValid?this.value!==Math.round(this.value):null}get isPositive(){return this.isValid?this.value>0:null}get isNegative(){return this.isValid?this.value<0:null}get isZero(){return this.isValid?0===this.value:null}isGT(i){return t.n(i)&&this.isValid?this.value>i:null}isLT(i){return t.n(i)&&this.isValid?this.value<i:null}isGTE(i){return t.n(i)&&this.isValid?this.value>=i:null}isLTE(i){return t.n(i)&&this.isValid?this.value<=i:null}isEq(i){return t.n(i)&&this.isValid?this.value===i:null}isMultOf(i){return t.n(i)&&this.isValid?!(this.value%i):null}_f(i,s=""){if(!t.f(i))throw new Error(`numb.${s}: `+`${this.value}`+" called with non function "+`${i}`)}if(i,s,n,r){if("isInvalid"===i)return this.isInvalid?this.doV(s):t.f(n)?this.do(n):void 0;if("isValid"===i)return this.isValid?this.do(s):t.f(n)?this.doV(n,i):void 0;if(!this.isValid)return t.f(r)?this.doV(r):void 0;if(!t.f(i)){if(t.s(i)){if(e.includes(i))return this[i]?this.do(s,i):void(t.f(n)&&this.do(n,i));throw new Error(`bad test ${i}`)}return!0===i?this.do(s,i):!1===i?this.do(n,i):this.if(i===this.value,s,n,r)}return this.do(i)?this.do(s,!0):t.f(n)?this.doV(n):void 0}valid(i,t){return this.if("isValid",i,t),h(this,"isValid")}invalid(i,t){return this.if("isInvalid",i,t),h(this,"isInvalid")}positive(i,t,s){return this.if("isPositive",i,t,s),h(this,"isPositive")}negative(i,t,s){return this.if("isNegative",i,t,s),h(this,"isNegative")}zero(i,t,s){return this.if("isZero",i,t,s),h(this,"isZero")}whole(i,t,s){return this.if("isWhole",i,t,s),h(this,"isWhole")}float(i,t,s){return this.if("isValid",i,t,s),h(this,"isValid")}infinite(i,t,s){return this.if("isInfinite",i,t,s),h(this,"isInfinite")}infiniteNeg(i,t,s){return this.if("isInfiniteNeg",i,t,s),h(this,"isInfiniteNeg")}even(i,t,s){return this.if("isEven",i,t,s),h(this,"isEven")}odd(i,t,s){return this.if("isOdd",i,t,s),h(this,"isOdd")}gt(i,t,s,e){return this.if(t=>t>i,t,s,e),h(this,"isGT",i)}multOf(i,t,s,e){return this.if(t=>!(t%i),t,s,e),h(this,"isMultOf",i)}gte(i,t,s,e){return this.if(t=>t>=i,t,s,e),h(this,"isGTE",i)}lt(i,t,s,e){return this.if(t=>t<i,t,s,e),h(this,"isLT",i)}lte(i,t,s,e){return this.if(t=>t<=i,t,s,e),h(this,"isLTE",i)}eq(i,t,s,e){return this.if(t=>t===i,t,s,e),h(this,"isEq",i)}}return(...i)=>new l(...i)}));